package test;

import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.Random;

import javax.imageio.ImageIO;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
//frame 영역
public class test extends JFrame implements ActionListener{
	BufferedImage img = null;
	public int x,y,session=0;
	public test() {
		setTitle("dsfa");
		try {
			// 사진은 아래 사진을 이용할것! 
			img = ImageIO.read(new File("C:\\Users\\NET-04\\Desktop\\map.jpg"));
		}catch(IOException e) {
			System.out.print("no img");
			System.exit(0);
		}
		// 지진 발생 버튼 (borderLayout을 이용
		add(new MyPanel(), BorderLayout.CENTER);
		JButton bt = new JButton("Earthquake Occur");
		bt.addActionListener(this);
		add(bt, BorderLayout.SOUTH);
		pack();
		setVisible(true);
	}
	
	// panel 영역
	class MyPanel extends JPanel{
		public void paint(Graphics g) {
			// map
			g.drawImage(img, 0, 0, null);
			// 진원지
			if(session==0) {
				g.fillOval(0, 0, 0, 0);
			}
			if(session==1)
				g.fillOval(x, y, 20, 20);
		}
		// mpa.jpg
		public Dimension getPreferredSize() {
			if(img == null) {
				return new Dimension(100,100);
			}else {
				return new Dimension(img.getWidth(null), img.getHeight(null));
			}
		}
	}
	
	// Earthquake Occur가 눌렸을  때 액션
	@Override
	public void actionPerformed(ActionEvent arg0) {
		Random ran = new Random();
		if(++session>=1) {
			x = ran.nextInt(600);
			y = ran.nextInt(800);			
		}		
		repaint();
	}
	
	public static void main(String[] args) {
		new test();
	}
}
