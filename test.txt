package disaster;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.Random;

import javax.imageio.ImageIO;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
//frame 영역
public class test extends JFrame implements ActionListener{
	BufferedImage img = null;
	public int x, y, session, Earthquake=0;
	public test() {
		setTitle("dsfa");
		try {
			// 사진은 아래 사진을 이용할것! 
			img = ImageIO.read(new File("C:\\Users\\NET-03\\Desktop\\map.jpg"));
		}catch(IOException e) {
			System.out.print("no img");
			System.exit(0);
		}
		// 지진 발생 버튼 (borderLayout을 이용
		add(new MyPanel(), BorderLayout.CENTER);
		JButton bt = new JButton("Earthquake Occur");
		bt.addActionListener(this);
		add(bt, BorderLayout.SOUTH);
		pack();
		setVisible(true);
	}
	
	// panel 영역
	class MyPanel extends JPanel{
		public void paint(Graphics g) {
			// 끝 점 확인 ( x = 605 y = 706)
			// map
			g.drawImage(img, 0, 0, null);
			
			// 진원지
			if(Earthquake>=1) {
				g.setColor(Color.RED);
				g.fillOval(x, y, 20, 20);
				System.out.printf("지원지 : %d %d\n\n", x,y);
			}
			// 지역 좌표 180 -> 145 : 35
			
				// 서울특별시
				g.setColor(Color.BLUE);
				g.fillOval(220, 145, 15, 15);
				
				// 경기도
				g.setColor(Color.BLUE);
				g.fillOval(250, 205, 15, 15);
				
				// 강원도
				g.setColor(Color.BLUE);
				g.fillOval(380, 115, 15, 15);
				
				// 충청도
				g.setColor(Color.BLUE);
				g.fillOval(270, 305, 15, 15);
				
				// 전라도
				g.setColor(Color.BLUE);
				g.fillOval(220, 485, 15, 15);
				
				// 경상도
				g.setColor(Color.BLUE);
				g.fillOval(430, 395, 15, 15);
				
				/* 
				 * 끝 점 확인 : (0, 0) ~ (605, 763)
				--- 동해 --- (550, 0) ~ (605, 763)
				g.fillOval(550, 0, 20, 20);
				g.fillOval(605, 0, 20, 20);
				g.fillOval(550, 763, 20, 20);
				g.fillOval(605, 763, 20, 20);
				--- 서해 --- (0, 0) ~ (50, 763)
				g.fillOval(0, 0, 20, 20);
				g.fillOval(50, 0, 20, 20);
				g.fillOval(0, 763, 20, 20);
				g.fillOval(50, 763, 20, 20);
				
				--- 남해 --- (51, 675) ~ (549, 763)
				g.fillOval(51, 675, 20, 20);
				g.fillOval(549, 675, 20, 20);
				g.fillOval(549, 763, 20, 20);
				g.fillOval(51, 763, 20, 20);
				*/
		}
		// mpa.jpg
		public Dimension getPreferredSize() {
			if(img == null) {
				return new Dimension(100,100);
			}else {
				return new Dimension(img.getWidth(null), img.getHeight(null));
			}
		}
	}
	
	// Earthquake Occur가 눌렸을 때 액션
	// 끝 점 확인 ( x = 605 y = 706)
	@Override
	public void actionPerformed(ActionEvent arg0) {
		Random ran = new Random();
		session = ran.nextInt(3);
		if(++Earthquake>=1) {
			//session이 0인경우 서해, 1인경우 동해, 2인 경우 남해
			if(session == 0) {
				x = ran.nextInt(50);
				y = ran.nextInt(763);	
			}else if (session == 1) {
				x = ran.nextInt(55)+550;
				y = ran.nextInt(763);	
			}else {
				x = ran.nextInt(498)+51;
				y = ran.nextInt(88)+675;	
			}
		}
		if(session == 0) {
			System.out.println("서해");
		}else if(session == 1) {
			System.out.println("동해");
		}else {
			System.out.println("남해");
		}
		
		repaint();
	}
	
	public static void main(String[] args) {
		new test();
	}
}
